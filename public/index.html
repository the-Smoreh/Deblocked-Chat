<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Deblocked Chat V3 Ultra ‚Äî Vortex Integration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./style.css?v=4" />
  </head>
  <body class="no-scroll">
    <canvas id="stars" aria-hidden="true"></canvas>

    <div id="intro" class="intro" role="dialog" aria-modal="true" aria-labelledby="introTitle">
      <div class="intro-card">
        <header class="intro-head">
          <div class="intro-glow" aria-hidden="true"></div>
          <h1 id="introTitle">Deblocked Chat V3 Ultra</h1>
          <p class="intro-sub">Now with Vortex cross-network presence, zero friction, and AAA visuals.</p>
        </header>

        <div class="intro-grid">
          <label class="field">
            <span class="label">Display name</span>
            <input id="introName" class="input" maxlength="32" placeholder="Choose a codename" />
          </label>

          <label class="field">
            <span class="label">Server realm</span>
            <div class="select-wrap">
              <select id="serverMode" class="input select">
                <option value="deblocked">Deblocked Chat ‚Ä¢ Railway</option>
                <option value="vortex">Vortex Chat ‚Ä¢ WaveUnblocked</option>
              </select>
              <span class="select-indicator" aria-hidden="true">‚ñæ</span>
            </div>
          </label>

          <div class="field file-field">
            <span class="label">Avatar (PNG ‚Ä¢ JPEG ‚Ä¢ WEBP)</span>
            <label class="file-pill">
              <input id="introAvatar" type="file" accept="image/png,image/jpeg,image/webp" />
              <span class="file-pill-icon">üìÅ</span>
              <span class="file-pill-label">Upload avatar</span>
            </label>
            <p class="muted">Avatar + theme sync instantly across devices and both networks.</p>
          </div>
        </div>

        <div class="intro-actions">
          <button id="introStart" class="btn primary">Start chatting</button>
        </div>

        <footer class="intro-footer">
          <p class="tip">Switch between networks anytime in Settings ‚Üí Connectivity.</p>
        </footer>
      </div>
    </div>

    <div id="app" class="app" aria-hidden="true">
      <aside class="side-panel">
        <div class="side-header">
          <div class="brand">
            <div class="brand-icon" aria-hidden="true"></div>
            <div class="brand-meta">
              <div class="brand-title">Deblocked Chat</div>
              <div id="activeServer" class="brand-sub">Deblocked Realm</div>
            </div>
          </div>
          <div class="presence-meta">
            <div class="presence-count" id="onlineCount">0 online</div>
            <div class="presence-avatars" id="onlineList"></div>
          </div>
        </div>

        <section class="side-settings">
          <button id="settingsBtn" class="btn ghost wide">‚öôÔ∏è Settings</button>
          <button id="connectivityBtn" class="btn ghost wide">üåê Connectivity</button>
          <button id="toggleStarsBtn" class="btn ghost wide">‚ú® Toggle Starfield</button>
        </section>

        <section class="side-history" id="reactionPalette" aria-label="Quick reactions">
          <button data-emoji="‚ù§Ô∏è" class="emoji-btn">‚ù§Ô∏è</button>
          <button data-emoji="üòÇ" class="emoji-btn">üòÇ</button>
          <button data-emoji="üëç" class="emoji-btn">üëç</button>
          <button data-emoji="üòÆ" class="emoji-btn">üòÆ</button>
          <button data-emoji="üëé" class="emoji-btn">üëé</button>
        </section>
      </aside>

      <div class="chat-shell">
        <header id="banner" class="banner">
          <div class="banner-left">
            <h2 class="room-title">Skyline Lounge</h2>
            <span class="room-sub">Real-time synced with lightning-grade servers.</span>
          </div>
          <div class="banner-actions">
            <label class="toggle">
              <input id="toggleTimestamps" type="checkbox" />
              <span>Show timestamps</span>
            </label>
            <label class="toggle">
              <input id="toggleAutoScroll" type="checkbox" checked />
              <span>Auto-scroll</span>
            </label>
          </div>
        </header>

        <main id="feed" class="feed" aria-live="polite"></main>
        <div id="typing" class="typing hidden"></div>

        <footer class="composer">
          <div class="composer-top">
            <div class="profile">
              <label class="pfp" title="Upload avatar">
                <input id="avatarInput" type="file" accept="image/png,image/jpeg,image/webp" hidden />
                <img id="avatarPreview" alt="Your avatar" />
              </label>
              <div class="profile-meta">
                <div id="profileName" class="profile-name"></div>
                <div class="profile-tagline">Drag & drop files, mention friends with @</div>
              </div>
            </div>
            <div class="composer-actions">
              <button id="bannerTheme" class="btn icon" title="Randomize gradient">üé®</button>
              <button id="historyRefresh" class="btn icon" title="Refresh history">üîÑ</button>
              <button id="clearChat" class="btn ghost" type="button">Clear local log</button>
            </div>
          </div>

          <div class="composer-main">
            <div class="reply-preview hidden" id="replyPreview">
              <div class="reply-meta">
                <span id="replyUser"></span>
                <span class="reply-text" id="replyText"></span>
              </div>
              <button id="cancelReply" class="btn icon" title="Cancel reply">‚úï</button>
            </div>
            <textarea id="messageInput" class="input msg-input" placeholder="Shift + Enter for newline" autocomplete="off"></textarea>
            <div class="composer-bar">
              <button id="attachBtn" class="btn ghost" title="Attach image">üìé</button>
              <input id="fileInput" type="file" accept="image/png,image/jpeg,image/gif,image/webp" hidden />
              <button id="sendBtn" class="btn primary strong" title="Send">Send</button>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <dialog id="settings" class="settings">
      <form method="dialog" class="settings-card">
        <header class="settings-header">
          <h2>Personalize the Experience</h2>
          <button id="closeSettings" class="btn icon ghost" value="close" title="Close">‚úï</button>
        </header>

        <section class="settings-grid">
          <label class="field">
            <span class="label">Display name</span>
            <input id="nameField" class="input" maxlength="32" placeholder="Your display name" />
          </label>

          <label class="field">
            <span class="label">Name gradient (left)</span>
            <input id="colorA" type="color" value="#7b61ff" />
          </label>

          <label class="field">
            <span class="label">Name gradient (right)</span>
            <input id="colorB" type="color" value="#ad83ff" />
          </label>

          <label class="field">
            <span class="label">Banner color</span>
            <input id="bannerColor" type="color" value="#1d1b22" />
          </label>

          <div class="field">
            <span class="label">Accent preview</span>
            <div id="accentPreview" class="accent-preview"></div>
          </div>
        </section>

        <footer class="settings-footer">
          <button id="saveSettings" class="btn primary">Save changes</button>
        </footer>
      </form>
    </dialog>

    <dialog id="connectivity" class="settings">
      <form method="dialog" class="settings-card">
        <header class="settings-header">
          <h2>Connectivity</h2>
          <button id="closeConnectivity" class="btn icon ghost" value="close" title="Close">‚úï</button>
        </header>
        <section class="settings-grid">
          <label class="field">
            <span class="label">Active network</span>
            <div class="select-wrap">
              <select id="connectivityServer" class="input select">
                <option value="deblocked">Deblocked Chat ‚Ä¢ Railway</option>
                <option value="vortex">Vortex Chat ‚Ä¢ WaveUnblocked</option>
              </select>
              <span class="select-indicator" aria-hidden="true">‚ñæ</span>
            </div>
            <p class="muted">Switch instantly; history sync and presence update in real time.</p>
          </label>
          <label class="field">
            <span class="label">Starfield background</span>
            <label class="toggle inline">
              <input id="toggleStars" type="checkbox" checked />
              <span>Enable cosmic ambience</span>
            </label>
          </label>
        </section>
        <footer class="settings-footer">
          <button id="applyConnectivity" class="btn primary">Apply</button>
        </footer>
      </form>
    </dialog>

    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="./app.js?v=4"></script>
  </body>
</html>
